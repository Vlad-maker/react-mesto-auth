{"version":3,"sources":["img/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","img/succes.svg","img/denied.svg","components/InfoTooltip.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","to","src","alt","loggedIn","email","path","exact","onClick","onLogOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","like","link","name","onCardClick","loading","type","onCardDelete","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","i","Footer","PopupWithForm","isOpened","onClose","action","noValidate","onSubmit","title","children","ImagePopup","api","options","this","_Url","Url","_token","token","_authUrl","authUrl","res","ok","json","Promise","reject","Error","status","fetch","headers","authorization","then","_getResponse","data","method","body","JSON","stringify","id","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","value","onChange","target","EditAvatarPopup","ref","useRef","onUpdateAvatar","current","AddPlacePopup","setLink","InfoTooltip","isSuccess","setIsSuccess","Success","Denied","ProtectedRoute","Component","component","withRouter","setEmail","password","setPassword","App","isEditProfilePopupOpened","setIsEditProfilePopupOpened","isEditAvatarPopupOpened","setIsEditAvatarPopupOpened","isAddPlacePopupOpened","setIsAddPlacePopupOpened","isImagePopupOpened","setIsImagePopupOpened","isInfoTooltipOpened","setIsInfoTooltipOpened","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","history","useHistory","a","l","changeLikeStatus","newCard","newCards","c","console","log","message","deleteCard","filter","closeAllPopups","handleEscClose","evt","key","handleOverlayClose","classList","contains","user","setProfileInfo","setProfileAvatar","postNewCard","registration","push","login","checkToken","localStorage","setItem","getInitialCards","getContent","getProfileInfo","getUserInfo","jwt","getItem","document","addEventListener","removeEventListener","Provider","Logo","removeItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.557a34ff.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import React from \"react\";\nimport { Link, Route, Switch } from 'react-router-dom';\n\nexport default function Header(props) {\n  return (\n    <header className=\"header\">\n      <Link to=\"/\" className=\"header__logo\">\n        <img src={props.src} alt=\"Логотип\" className=\"header__logo-image\" />\n      </Link>\n      <div className=\"header__profile\">\n        {props.loggedIn ? (<p className=\"header__mail\">{props.email}</p>) : ''}\n        <Switch>\n          <Route path=\"/sign-in\">\n            <Link to=\"/sign-up\" className=\"header__link\">Регистрация</Link>\n          </Route>\n          <Route path=\"/sign-up\">\n            <Link to=\"/sign-in\" className=\"header__link\">Войти</Link>\n          </Route>\n          <Route exact path=\"/\">\n            <Link to=\"/sign-up\" onClick={props.onLogOut} className=\"header__link\">Выйти</Link>\n          </Route>\n        </Switch>\n      </div>\n    </header >\n  )\n};","import React from 'react';\nexport const CurrentUserContext = React.createContext();","import { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport React from 'react';\n\nexport default function Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = props.card.owner._id === currentUser._id;\n  const isLiked = props.card.likes.some((like) => {\n    return like._id === currentUser._id;\n  });\n  function handleCardClick() {\n    props.onCardClick(props.card);\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleCardDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <div className={props.className} >\n      <>\n        <img src={props.card.link} alt={props.card.name} className=\"card__photo\" onClick={handleCardClick} loading=\"lazy\" />\n        {isOwn && <button type=\"button\" className=\"card__deletion\" onClick={handleCardDeleteClick}></button>}\n        <div className=\"card__description\">\n          <h3 className=\"card__title\">{props.card.name}</h3>\n          <div className=\"card__like\">\n            <button type=\"button\" className={`card__like-button ${isLiked && \"card__like-button_active\"}`} onClick={handleLikeClick}></button>\n            <span className=\"card__like-number\">{props.card.likes.length}</span>\n          </div>\n        </div>\n      </>\n    </div>\n  );\n};","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Card from './Card';\n\nexport default function Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  return (\n    <main className=\"main\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\">\n          <div className=\"profile__overlay\" onClick={props.onEditAvatar}></div>\n          <img src={currentUser.avatar} alt={`Аватар ${currentUser.name}`} className=\"profile__photo\" />\n        </div>\n        <div className=\"profile__description\">\n          <div className=\"profile__title-row\">\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\n            <button type=\"button\" className=\"profile__button profile__button_edit\" onClick={props.onEditProfile}></button>\n          </div>\n          <p className=\"profile__subtitle\">\n            {currentUser.about}\n          </p>\n        </div>\n        <button type=\"button\" className=\"profile__button profile__button_add\" onClick={props.onAddPlace}></button>\n      </section>\n      <section className=\"cards-grid\">\n        {props.cards.map((card, i) => {\n          return (\n            <Card className=\"card\" key={card._id} onCardClick={props.onCardClick} card={card} onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete} />\n          );\n        })}\n      </section>\n    </main>\n    )\n  };","export default function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\n    </footer>\n  )\n};","import React from 'react';\n\nexport default function PopupWithForm(props) {\n  return (\n    <div className={`popup popup_type_${props.name} ${props.isOpened && \"popup_opened\"}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\n        <form action=\"#\" className=\"popup__form\" name={props.name} noValidate onSubmit={props.onSubmit}>\n          <h2 className=\"popup__title\">\n            {props.title}\n          </h2>\n          {props.children}\n          <button type=\"submit\" className=\"popup__submit\" >Сохранить</button>\n        </form>\n      </div>\n    </div >\n  )\n};","export default function ImagePopup(props) {\n  return (\n    <div className={`popup popup_type_image ${props.isOpened && \"popup_opened\"}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\n        <figure className=\"popup__figure\">\n          <img src={props.card.src} alt={props.card.name} className=\"popup__image\" />\n          <figcaption className=\"popup__caption\">{`${props.card.name}`}</figcaption>\n        </figure>\n      </div>\n    </div>\n  )\n};\n","export class Api {\n  constructor(options) {\n    this._Url = options.Url;\n    this._token = options.token;\n    this._authUrl = options.authUrl;\n  }\n\n  _getResponse(res) {\n    if (res.ok)\n      return res.json();\n    return Promise.reject(new Error(`Ошибка: ${res.status}`))\n  }\n\n  getProfileInfo() {\n    return fetch(`${this._Url}users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(res => {\n        return this._getResponse(res);\n      })\n  }\n\n  setProfileInfo(data) {\n    return fetch(`${this._Url}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        data\n      )\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  getInitialCards() {\n    return fetch(`${this._Url}cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  postNewCard(data) {\n    return fetch(`${this._Url}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        data\n      )\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._Url}cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  changeLikeStatus(id, isLiked) {\n    if (!isLiked) {\n        return fetch(`${this._Url}cards/likes/${id} `, {\n            method: 'PUT',\n            headers: {\n                authorization: this._token\n              }\n        })\n            .then(res => this._getResponse(res));\n    } else {\n        return fetch(`${this._Url}cards/likes/${id}`, {\n            method: 'DELETE',\n            headers: {\n                authorization: this._token\n              }\n        })\n            .then(res => this._getResponse(res));\n    }\n  }\n\n  setProfileAvatar(data) {\n    return fetch(`${this._Url}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        data\n      )\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  registration(data) {\n    return fetch(`${this._authUrl}signup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        data\n      )\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  login(data) {\n    return fetch(`${this._authUrl}signin`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(\n        data\n      )\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n  checkToken(token) {\n    return fetch(`${this._authUrl}users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n    }).then(res => {\n      return this._getResponse(res);\n    })\n  }\n\n}\n\nconst options = {\n  Url: 'https://mesto.nomoreparties.co/v1/cohort-19/',\n  authUrl: 'https://auth.nomoreparties.co/',\n  token: 'b88baff0-9a43-403c-833b-e4c683401608'\n}\nconst api = new Api(options);\nexport default api;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleNameChange(e) {\n    e.preventDefault();\n    setName(e.target.value);\n  }\n  function handleDescriptionChange(e) {\n    e.preventDefault();\n    setDescription(e.target.value)\n  }\n  function handleDataSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" isOpened={props.isOpened}\n      onClose={props.onClose} onSubmit={handleDataSubmit}>\n      <input id=\"name-input\" type=\"text\" className=\"popup__input  popup__input_type_title\"\n        placeholder=\"Имя\" name=\"name\" required minLength=\"2\" maxLength=\"40\"\n        value={name || ''} onChange={handleNameChange} />\n      <span id=\"name-input-error\" className=\"popup__input-error\" ></span>\n      <input id=\"job-input\" type=\"text\" className=\"popup__input popup__input_type_subtitle\"\n        placeholder=\"О себе\" name=\"about\" required minLength=\"2\" maxLength=\"200\"\n        value={description || ''} onChange={handleDescriptionChange} />\n      <span id=\"job-input-error\" className=\"popup__input-error\"></span>\n    </PopupWithForm>\n  )\n};","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nexport default function EditAvatarPopup(props) {\n  const ref = React.useRef('');\n  function handleDataSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({ avatar: ref.current.value });\n  }\n  return (\n    <PopupWithForm name=\"avatar\" title=\"Обновить аватар\"\n      isOpened={props.isOpened} onClose={props.onClose} onSubmit={handleDataSubmit}>\n      <input id=\"avatar-input\" type=\"url\" className=\"popup__input  popup__input_type_link\"\n        placeholder=\"Ссылка на картинку\" name=\"avatar\" required ref={ref} />\n      <span id=\"avatar-input-error\" className=\"popup__input-error\"></span>\n    </PopupWithForm>\n  )\n};","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nexport default function AddPlacePopup(props) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  function handleNameChange(e) {\n    e.preventDefault();\n    setName(e.target.value);\n  }\n  function handleLinkChange(e) {\n    e.preventDefault();\n    setLink(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onSubmit({ name, link });\n  }\n\n  return (\n    <PopupWithForm name=\"add-card\" title=\"Новое место\" isOpened={props.isOpened} onClose={props.onClose} onSubmit={handleSubmit}>\n      <input id=\"place-input\" type=\"text\" className=\"popup__input popup__input_type_place\"\n        placeholder=\"Название\" name=\"name\" required minLength=\"2\" maxLength=\"30\" value={name || ''} onChange={handleNameChange} />\n      <span id=\"place-input-error\" className=\"popup__input-error\"></span>\n      <input id=\"link-input\" type=\"url\" className=\"popup__input popup__input_type_link\"\n        placeholder=\"Ссылка на картинку\" name=\"link\" required value={link || ''} onChange={handleLinkChange} />\n      <span id=\"link-input-error\" className=\"popup__input-error\"></span>\n    </PopupWithForm>\n  )\n};","export default __webpack_public_path__ + \"static/media/succes.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/denied.df8eddf6.svg\";","import React from 'react';\nimport Success from '../img/succes.svg';\nimport Denied from '../img/denied.svg';\n\nexport default function InfoTooltip(props) {\n  const [isSuccess, setIsSuccess] = React.useState(false);\n  React.useEffect(() => {\n    setIsSuccess(props.isSuccess);\n  }, [props.isSuccess]);\n  return (\n    <div className={`popup popup_type_info ${props.isOpened && \"popup_opened\"}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\n        <div className=\"popup__content\">\n          {isSuccess ? (<>\n            <img src={Success} className=\"popup__icon\" alt=\"Успех\" />\n            <p className=\"popup__info\">Вы успешно зарегистрировались!</p>\n          </>) : (<><img src={Denied} className=\"popup__icon\" alt=\"Ошибка\" />\n            <p className=\"popup__info\">Что-то пошло не так!\nПопробуйте ещё раз.</p></>)\n          }\n        </div>\n      </div>\n    </div>\n  )\n};","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? (<Component {...props} />) : (<Redirect to=\"/sign-up\" />)\n      }\n    </Route>\n  );\n}\nexport default ProtectedRoute;","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nfunction Login(props) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleDataSubmit(e) {\n    e.preventDefault();\n    props.onSubmit({ password, email });\n  }\n  function handleMailChange(e) {\n    e.preventDefault();\n    setEmail(e.target.value);\n  }\n  function handlePasswordChange(e) {\n    e.preventDefault();\n    setPassword(e.target.value);\n  }\n\n  return (\n    <div>\n      <form className=\"auth__form\" action=\"#\" onSubmit={handleDataSubmit}>\n        <h2 className=\"auth__heading\">\n          Вход\n        </h2>\n        <fieldset className=\"auth__fieldset\">\n          <input value={email || ''} onChange={handleMailChange} name=\"email\" className=\"auth__input\" type=\"email\" />\n          <input value={password || ''} onChange={handlePasswordChange} name=\"password\" className=\"auth__input\" type=\"password\" />\n        </fieldset>\n        <button className=\"auth__submit\" type=\"submit\">Войти</button>\n      </form>\n    </div>)\n}\n\nexport default withRouter(Login);","import React from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nfunction Register(props) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n\n  function handleDataSubmit(e) {\n    e.preventDefault();\n    props.onSubmit({ password, email });\n  }\n  function handleMailChange(e) {\n    e.preventDefault();\n    setEmail(e.target.value);\n  }\n  function handlePasswordChange(e) {\n    e.preventDefault();\n    setPassword(e.target.value);\n  }\n  return (\n    <form className=\"auth__form\" action=\"#\" onSubmit={handleDataSubmit}>\n      <h2 className=\"auth__heading\">\n        Регистрация\n        </h2>\n      <fieldset className=\"auth__fieldset\">\n        <input value={email || ''} onChange={handleMailChange} name=\"email\" className=\"auth__input\" type=\"email\" />\n        <input value={password || ''} onChange={handlePasswordChange} name=\"password\" className=\"auth__input\" type=\"password\" />\n      </fieldset>\n      <button className=\"auth__submit\" type=\"submit\">Зарегестрироваться</button>\n      <p className=\"auth__text\">Уже зарегестрированы? <Link className=\"auth__link\" to=\"/sign-in\">Войти</Link></p>\n    </form>\n  );\n}\nexport default withRouter(Register);","import Logo from '../img/logo.svg';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport React from 'react';\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport InfoTooltip from './InfoTooltip';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\n\nexport default function App() {\n  const [isEditProfilePopupOpened, setIsEditProfilePopupOpened] = React.useState(false);\n  const [isEditAvatarPopupOpened, setIsEditAvatarPopupOpened] = React.useState(false);\n  const [isAddPlacePopupOpened, setIsAddPlacePopupOpened] = React.useState(false);\n  const [isImagePopupOpened, setIsImagePopupOpened] = React.useState(false);\n  const [isInfoTooltipOpened, setIsInfoTooltipOpened] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [isSuccess, setIsSuccess] = React.useState(false);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    async function getContent() {\n      try {\n        setCards(await api.getInitialCards());\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    getContent();\n  }, []);\n\n  async function handleCardLike(card) {\n    const isLiked = card.likes.some((l) => {\n      return l._id === currentUser._id;\n    });\n    try {\n      const newCard = await api.changeLikeStatus(card._id, isLiked);\n      const newCards = cards.map((c) => {\n        return c._id === card._id ? newCard : c;\n      });\n      setCards(newCards);\n    }\n    catch (e) {\n      console.log(e.message);\n    }\n  }\n\n  async function handleCardDelete(card) {\n    try {\n      await api.deleteCard(card._id);\n      const newCards = cards.filter((c) => {\n        return c._id !== card._id;\n      })\n      setCards(newCards);\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n\n  React.useEffect(() => {\n    async function getUserInfo() {\n      try {\n        setCurrentUser(await api.getProfileInfo());\n      } catch (e) {\n        console.log(e.message);\n      }\n    }\n    getUserInfo();\n  }, []);\n\n  React.useEffect(() => {\n    async function checkToken() {\n      const jwt = localStorage.getItem('jwt');\n      if (jwt) {\n        try {\n          const res = await api.checkToken(jwt)\n          setLoggedIn(true);\n          setEmail(res.data.email);\n        } catch (e) {\n          console.log(e.message);\n        }\n      }\n    }\n    checkToken();\n  }, [loggedIn]);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpened(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpened(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpened(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard({\n      ...selectedCard,\n      src: card.link,\n      name: card.name\n    });\n    setIsImagePopupOpened(true);\n  }\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpened(false);\n    setIsEditProfilePopupOpened(false);\n    setIsAddPlacePopupOpened(false);\n    setIsImagePopupOpened(false);\n    setIsInfoTooltipOpened(false);\n  }\n  function handleEscClose(evt) {\n    if (evt.key === 'Escape') {\n        closeAllPopups();\n    }\n  }\n  function handleOverlayClose(evt) {\n    if (evt.target.classList.contains('popup')) {\n        closeAllPopups();\n    }\n  }\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', handleEscClose);\n    document.addEventListener('mouseup', handleOverlayClose);\n    return () => {\n        document.removeEventListener('keydown', handleEscClose);\n        document.removeEventListener('mouseup', handleOverlayClose);\n    }\n  });\n\n  async function handleUpdateUser(user) {\n    try {\n      setCurrentUser(await api.setProfileInfo(user));\n      closeAllPopups();\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n  async function handleUpdateAvatar(link) {\n    try {\n      setCurrentUser(await api.setProfileAvatar(link));\n      closeAllPopups();\n    }\n    catch (e) {\n      console.log(e.message);\n    }\n  }\n  async function handleAddPlaceSubmit(data) {\n    try {\n      setCards([await api.postNewCard(data), ...cards]);\n      closeAllPopups();\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n  async function handleRegister(data) {\n    try {\n      await api.registration(data);\n      setIsSuccess(true);\n      setIsInfoTooltipOpened(true);\n      history.push('/sign-in');\n    }\n    catch (e) {\n      setIsSuccess(false);\n      setIsInfoTooltipOpened(true);\n      console.log(e.message)\n    }\n  }\n  async function handleLogin(data) {\n    try {\n      const login = await api.login(data);\n      const res = await api.checkToken(login.token);\n      setEmail(res.data.email);\n      localStorage.setItem('jwt', login.token);\n      setLoggedIn(true);\n    }\n    catch (e) {\n      console.log(e.message);\n    }\n  }\n  function handleLogOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n  }\n\n  return (\n    <>\n      <div className=\"page\">\n        <div className=\"page__container\">\n\n          <CurrentUserContext.Provider value={currentUser}>\n\n            <Header src={Logo} onLogOut={handleLogOut} email={email} loggedIn={loggedIn} />\n            <Switch>\n              <ProtectedRoute exact path=\"/\" component={Main} loggedIn={loggedIn}\n                onEditAvatar={handleEditAvatarClick} onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick} onCardClick={handleCardClick}\n                cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete}\n              />\n              <Route path=\"/sign-in\">\n                <div className=\"auth\">\n                  <Login onSubmit={handleLogin} />\n                </div>\n              </Route>\n              <Route path=\"/sign-up\">\n                <div className=\"auth\">\n                  <Register onSubmit={handleRegister} />\n                </div>\n              </Route>\n            </Switch>\n            <Route>\n              {loggedIn ? (<Redirect exact to=\"/\" />) : (<Redirect to=\"/sign-up\" />)}\n            </Route>\n            <Footer />\n            <EditProfilePopup isOpened={isEditProfilePopupOpened} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n            <EditAvatarPopup isOpened={isEditAvatarPopupOpened} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n            <AddPlacePopup isOpened={isAddPlacePopupOpened} onClose={closeAllPopups} onSubmit={handleAddPlaceSubmit} />\n            <InfoTooltip isOpened={isInfoTooltipOpened} onClose={closeAllPopups} isSuccess={isSuccess} />\n          </CurrentUserContext.Provider>\n        </div>\n        <PopupWithForm name=\"confirm\" title=\"Вы уверены?\" onClose={closeAllPopups} />\n        <ImagePopup card={selectedCard} isOpened={isImagePopupOpened} onClose={closeAllPopups} />\n      </div>\n    </>\n  )\n};","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from 'react-router-dom';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}